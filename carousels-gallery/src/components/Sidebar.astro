---
import type { HTMLAttributes } from "astro/types";

type Props = HTMLAttributes<"a">;

const { href, class: className, ...props } = Astro.props;

const { pathname } = Astro.url;

const links = {
  horizontal: [
    { title: "List", href: "list" },
    { title: "Cards", href: "cards" },
    { title: "Video", href: "video" },
    { title: "Tabs", href: "tabs" },
    { title: "Gallery", href: "gallery" },
    { title: "Hubs", href: "hubs" },
    { title: "Pages", href: "pages", badge: "Spec's Choice" },
    { title: "TV Series", href: "series" },
    { title: "App Switcher", href: "app-switcher", badge: "Best Design" },
    { title: "Slider", href: "slider" },
    { title: "Product", href: "product" },
    { title: "Testimonials", href: "testimonials" },
    { title: "Virtualization", href: "virtualization" },
    { title: "3D", href: "3d" },
    { title: "Curved", href: "curved" },
    { title: "Weather", href: "weather" },
    { title: "Picker", href: "#" },
    { title: "Media Player", href: "#" },
    { title: "Wizard", href: "wizard" },
    { title: "Recommendations", href: "#" },
    { title: "Lightbox", href: "#" },
    { title: "Adaptive", href: "#" },
    { title: "Editable", href: "#" },
    { title: "Unlocker", href: "#" },
    { title: "Circular Lock", href: "#" },
  ],
  vertical: [
    { title: "List", href: "list" },
    { title: "Wheel", href: "wheel" },
    { title: "Scrollyspy", href: "scroll-spy", badge: "Dev's Choice" },
    { title: "Slides", href: "slides" },
    { title: "Stack", href: "stack" },
    { title: "Cards", href: "#" },
    { title: "Gallery", href: "#" },
    { title: "Scrollytelling", href: "#" },
    { title: "Table Of Contents", href: "#" },
    { title: "Restaurant Menu", href: "#" },
    { title: "Date/Time Picker", href: "#" },
    { title: "Color Picker", href: "#" },
    { title: "Slot Machine", href: "#" },
  ],
  bidi: [
    { title: "Grid", href: "grid" },
    { title: "Slides", href: "#" },
  ],
};
---

{/* @ts-ignore */}
<dialog id="sidenav" closedby="any">
  <aside>
    <header>
      <button title="Close" onclick="sidenav.close()" class="icon">close</button
      >
    </header>
    <h1>
      <a href="/carousel/"
        ><svg
          xmlns="http://www.w3.org/2000/svg"
          width="75"
          height="75"
          viewBox="0 0 1000 1000"
          role="img"
          aria-labelledby="css-logo-title css-logo-description"
        >
          <title id="css-logo-title">CSS Logo</title>
          <desc id="css-logo-description"
            >A purple square with rounded corners and the letters CSS inside in
            white</desc
          >
          <path
            id="bg"
            fill="#639"
            d="M0 0H840A160 160 0 0 1 1000 160V840A160 160 0 0 1 840 1000H160A160 160 0 0 1 0 840V0Z"
          ></path>
          <path
            id="fg"
            fill="#fff"
            d="m358.1,920c-64.23-.06-103.86-36.23-103.1-102.79,0,0,0-168.39,0-168.39,0-33.74,9.88-59.4,29.64-76.96,35.49-34.19,117.83-36.27,152.59.52,21.42,18.89,29.5,57.48,27.58,93.49h-73.72c.56-14.15-.19-35.58-8.51-43.65-10.81-14.63-39.36-12.91-46.91,2.32-4.64,8.26-6.96,20.49-6.96,36.67v146.18c0,30.65,10.65,46.15,31.96,46.49,9.96,0,17.53-3.62,22.68-10.85,7.19-8.58,8.31-27.58,7.73-41.32h73.72c5.04,70.07-36.32,119.16-106.71,118.29Zm234.04,0c-71.17.98-103.01-49.66-101.04-118.29h69.59c-1.93,29.92,8.35,57.17,32.99,55.27,10.99,0,18.73-3.44,23.2-10.33,8.5-12.59,10.09-48.95-2.06-63.02-8.49-13.55-39.03-25.51-55.16-33.57-23.03-11.02-39.61-24.1-49.75-39.26-22.87-33.64-20.75-107.48,11.34-137.4,31.18-36.92,112.61-38.62,143.82-.77,19.25,19.51,27.66,57.9,26.03,93.23h-67.02c.57-14.52-.8-37.95-6.44-46.49-3.95-7.23-11.43-10.85-22.42-10.85-19.59,0-29.38,11.71-29.38,35.12.21,24.86,9.9,35.06,32.48,45.45,29.24,11.36,66.42,30.76,79.9,54.24,40.2,71.54,12.62,180.82-86.09,176.65Zm224.76,0c-71.17.98-103.01-49.66-101.04-118.29h69.59c-1.93,29.92,8.35,57.17,32.99,55.27,10.99,0,18.73-3.44,23.2-10.33,8.5-12.59,10.09-48.95-2.06-63.02-8.49-13.55-39.03-25.51-55.16-33.57-23.03-11.02-39.61-24.1-49.75-39.26-22.87-33.64-20.75-107.48,11.34-137.4,31.18-36.92,112.61-38.62,143.82-.77,19.25,19.51,27.66,57.9,26.03,93.23h-67.02c.57-14.52-.8-37.95-6.44-46.49-3.95-7.23-11.43-10.85-22.42-10.85-19.59,0-29.38,11.71-29.38,35.12.21,24.86,9.9,35.06,32.48,45.45,29.24,11.36,66.42,30.76,79.9,54.24,40.2,71.54,12.62,180.82-86.09,176.65Z"
          ></path>
        </svg></a
      >
      <div>
        <span>Carousel</span>
        <span>Gallery</span>
      </div>
    </h1>
    <nav>
      {
        Object.entries(links).map(([key, linkGroup]) => (
          <>
            <h2>{key}</h2>
            <ul>
              {linkGroup.map((link) => (
                <li
                  class={
                    pathname === `/carousel/${key}/${link.href}` ? "active" : ""
                  }
                >
                  {link.href === "#" ? (
                    <a>{link.title}</a>
                  ) : (
                    <a href={`/carousel/${key}/` + link.href + "/"}>
                      {link.title}{" "}
                      {link.badge && <span class="badge">{link.badge}</span>}
                    </a>
                  )}
                </li>
              ))}
            </ul>
          </>
        ))
      }
    </nav>

    <footer>
      <h2>Resources</h2>
      <ul>
        <li>
          <a href="https://drafts.csswg.org/css-overflow-5/"
            >CSS Specification</a
          >
        </li>
        <li>
          <a href="https://flackr.github.io/carousel/">CSS Explainers</a>
        </li>
        <li>
          <a href="https://www.w3.org/WAI/ARIA/apg/patterns/carousel/"
            >WAI Aria Pattern</a
          >
        </li>
        <li>
          <a href="https://codepen.io/web-dot-dev/full/jOjaaEP">Snap Events</a>
        </li>
        <li>
          <a href="https://carousel-configurator.netlify.app/">Configurator</a>
        </li>
        <li>
          <a
            href="https://github.com/GoogleChromeLabs/css-web-ui-demos/tree/main/carousels-gallery"
            >View Source</a
          >
        </li>
      </ul>
    </footer>
  </aside>
</dialog>

<script>
  if (!HTMLDialogElement.prototype.hasOwnProperty("closedBy")) {
    // @ts-ignore: sidenav is the ID of an element
    sidenav.addEventListener("click", ({ target: dialog }) => {
      if (dialog.nodeName === "DIALOG") dialog.close("dismiss");
    });
  }
</script>

<style>
  dialog {
    @media (width < 1024px) {
      --_duration: 0.5s;
      --_card-inset: var(--size-5);

      /* inner card can query the dialog for h/w */
      container: dialog-panel / size;

      padding: 0;
      background: none;
      box-shadow: none;

      block-size: 100dvh;
      max-block-size: 100%;
      inline-size: min(var(--size-content-2), 80vw);

      margin: 0;
      margin-inline-end: auto;
      overflow-y: hidden;

      transition:
        display var(--_duration) allow-discrete,
        overlay var(--_duration) allow-discrete;

      &::backdrop {
        transition: opacity var(--_duration) var(--ease-4);
        opacity: 0;
        background-color: light-dark(#0003, #0008);
      }

      > aside {
        position: relative;
        block-size: calc(100% - (var(--_card-inset) * 2));
        margin-block: var(--_card-inset);
        margin-inline-start: var(--_card-inset);

        border-radius: var(--radius-3);

        @media (prefers-reduced-motion: reduce) {
          transition: opacity var(--_duration) var(--ease-2);
          opacity: 0;
        }

        @media (prefers-reduced-motion: no-preference) {
          transition: translate var(--_duration) var(--ease-in-out-5);
          translate: calc((100% + var(--_card-inset)) * -1) 0;
        }

        > header {
          display: flex;
          padding: var(--size-3);
          position: absolute;
          top: 0;
          right: 0;

          > button {
            --_bg: none;
            --_border: none;

            padding: var(--size-1);
            aspect-ratio: var(--ratio-square);
            border-radius: var(--radius-round);
            box-shadow: 0 0 0 var(--_highlight-size) var(--_highlight);
          }
        }
      }

      &[open] {
        &,
        &::backdrop {
          opacity: 1;
        }

        & > aside {
          opacity: 1;
          translate: 0;
        }
      }

      @starting-style {
        &[open],
        &[open]::backdrop {
          opacity: 0;
        }
        &[open] > aside {
          opacity: 0;
          translate: calc((100% + var(--_card-inset)) * -1) 0;
        }
      }
    }

    @media (width >= 1024px) {
      display: grid;
      margin: 0;
      padding: 0;

      position: sticky;
      top: 0;

      block-size: 100dvh;
      max-block-size: 100%;
      min-inline-size: 30ch;

      box-shadow: none;

      > aside {
        max-block-size: 100dvh;

        > header {
          display: none;
        }
      }
    }

    @media (height < 1024px) {
      aside {
        overflow: clip;
      }

      aside > footer {
        display: none;
      }
    }
  }

  aside {
    display: grid;
    grid-template-rows: auto 1fr auto;
    background: light-dark(
      white,
      oklch(from var(--surface-1) calc(l - 0.02) c h)
    );
    border-inline-end: 1px solid var(--surface-2);

    > h1 {
      display: flex;
      gap: var(--size-2);
      font-size: var(--font-size-4);
      padding-block-end: var(--size-3);
      border-bottom: 1px solid var(--surface-1);
      padding: var(--size-5);

      > div {
        display: grid;
        align-content: space-around;

        > span {
          line-height: 1.25cap;

          &:nth-child(1) {
            color: var(--text-2);
            font-size: 2rem;
            font-weight: 800;
          }

          &:nth-child(2) {
            color: var(--link);
            font-size: 3rem;
            font-weight: 300;
            text-indent: -1px;
          }
        }
      }
    }

    h2 {
      font-size: var(--font-size-3);
    }

    > nav {
      display: grid;
      gap: var(--size-3);
      padding: var(--size-5);
      padding-inline-end: var(--size-8);

      max-block-size: 100%;
      overflow-y: auto;

      background: linear-gradient(to bottom, white, var(--surface-1));

      @media (prefers-color-scheme: dark) {
        background: linear-gradient(
          to bottom,
          oklch(from var(--surface-1) calc(l - 0.02) c h),
          var(--surface-1)
        );
      }

      > ul {
        display: grid;
        gap: var(--size-2);
        padding: 0;
        list-style: none;
        border-inline-start: 1px solid var(--surface-3);

        > li {
          padding-inline-start: var(--size-3);

          &.active {
            font-weight: bold;
            border-inline-start: 2px solid light-dark(deeppink, hotpink);
            margin-inline-start: -2px;

            & > a {
              color: var(--text-1);
            }
          }

          > a:not([href]) {
            opacity: 50%;
          }
        }
      }
    }

    footer {
      display: grid;
      gap: var(--size-2);
      margin-block-start: auto;
      border-top: 1px solid var(--surface-1);
      padding: var(--size-5);

      > ul {
        display: grid;
        gap: var(--size-2);
        padding: 0;
        list-style-type: none;

        > li {
          padding: 0;
          font-size: var(--font-size-1);
        }
      }
    }

    .badge {
      color: var(--text-2);
      font-size: var(--font-size-0);
      border: 1px solid hsl(from var(--link) h s l / 50%);
      background: hsl(from var(--link) h s l / 10%);
      padding: 1px 3px;
      border-radius: 5px;
    }
  }
</style>
